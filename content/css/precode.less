@import "colors.less";

#debug() {
    background-color: @pinkish;
}

#visibleBox {
    padding: 0.38em 0; // 0;
    padding-left: 0.62em;
    border-left: .15em solid @pandoc-ghost;

    p:first-child { margin-top: 0; }
    p:last-child { margin-bottom: 0; }
}

#indented {
    margin-left: 1em;
}

blockquote:not(:has(pre)) {
    // margin: 1em 0 1em 1.7em;
    #visibleBox();
    #indented();
    // border-left: 2px solid @pandoc-ghost;
    font-style: italic;
}

blockquote:has(pre) {

    font-style: normal;
    background-image: linear-gradient(to right, @crt-screen-light 10%, transparent 40%);

    #visibleBox();
    #indented();
    padding-left: revert;
   border-color: @crt-screen-dark;
}

code {
    color: @code-text-bold;
    font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
    font-size: 82%;
    font-style: normal;
    hyphens: manual;
    margin: 0;
    overflow-wrap: break-word;
    padding-left: 0.2em;
    padding-right: 0.2em;
    letter-spacing: -.03em;
}


pre.file {
    #debug();
    border-radius: 0.2em;
    border-top-right-radius: 1.5em;
    margin-left: 2em;
    margin-right: 2em;
    border: none;
}

/*
Two kinds of pre that we care about: inside a block quote and not inside a blockquote.
    This section is to cover the sytle that is common to both
    */

@visible-padding: 0.62em;

pre {
    white-space: pre-wrap;

    #visibleBox();
    padding-left: @visible-padding;
    
    code {
        color: @crt-text-bold;
        letter-spacing: revert;
        padding: revert; // 0em;
        margin-bottom: 0;
    }

    background-color: @crt-screen-dark;
}

blockquote pre {
    padding-left: @visible-padding;

    code {
        color: @crt-text-dim;
    }

    border: revert;
    background-color: revert;
    padding-top: 0;
    padding-bottom: 0;
}

pre + blockquote:has(pre) {
    margin-top: 0; // remove top margin if it follows a pre
}